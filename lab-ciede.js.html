<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>lab-ciede.js - Convert Colors</title>
    
    <meta name="description" content="A tool for transforming colors with JavaScript" />
    
    
    
    <meta property="og:title" content="Convert Colors"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://jonathantneal.github.io/node-logo.svg"/>
    <meta property="og:site_name" content="Convert Colors"/>
    <meta property="og:url" content="https://jonathantneal.github.io/convert-colors"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/jonathantneal/convert-colors" >GitHub</a></h2><h2><a href="https://gitter.im/postcss" >Support</a></h2><h3>Global</h3><ul><li><a href="global.html#hex2ciede">hex2ciede</a></li><li><a href="global.html#hex2contrast">hex2contrast</a></li><li><a href="global.html#hex2hsl">hex2hsl</a></li><li><a href="global.html#hex2hsv">hex2hsv</a></li><li><a href="global.html#hex2hwb">hex2hwb</a></li><li><a href="global.html#hex2lab">hex2lab</a></li><li><a href="global.html#hex2lch">hex2lch</a></li><li><a href="global.html#hex2rgb">hex2rgb</a></li><li><a href="global.html#hex2xyz">hex2xyz</a></li><li><a href="global.html#hsl2ciede">hsl2ciede</a></li><li><a href="global.html#hsl2contrast">hsl2contrast</a></li><li><a href="global.html#hsl2hex">hsl2hex</a></li><li><a href="global.html#hsl2hsv">hsl2hsv</a></li><li><a href="global.html#hsl2hwb">hsl2hwb</a></li><li><a href="global.html#hsl2lab">hsl2lab</a></li><li><a href="global.html#hsl2lch">hsl2lch</a></li><li><a href="global.html#hsl2rgb">hsl2rgb</a></li><li><a href="global.html#hsl2xyz">hsl2xyz</a></li><li><a href="global.html#hsv2ciede">hsv2ciede</a></li><li><a href="global.html#hsv2contrast">hsv2contrast</a></li><li><a href="global.html#hsv2hex">hsv2hex</a></li><li><a href="global.html#hsv2hsl">hsv2hsl</a></li><li><a href="global.html#hsv2hwb">hsv2hwb</a></li><li><a href="global.html#hsv2lab">hsv2lab</a></li><li><a href="global.html#hsv2lch">hsv2lch</a></li><li><a href="global.html#hsv2rgb">hsv2rgb</a></li><li><a href="global.html#hsv2xyz">hsv2xyz</a></li><li><a href="global.html#hwb2ciede">hwb2ciede</a></li><li><a href="global.html#hwb2contrast">hwb2contrast</a></li><li><a href="global.html#hwb2hex">hwb2hex</a></li><li><a href="global.html#hwb2hsl">hwb2hsl</a></li><li><a href="global.html#hwb2hsv">hwb2hsv</a></li><li><a href="global.html#hwb2lab">hwb2lab</a></li><li><a href="global.html#hwb2lch">hwb2lch</a></li><li><a href="global.html#hwb2rgb">hwb2rgb</a></li><li><a href="global.html#hwb2xyz">hwb2xyz</a></li><li><a href="global.html#keyword2ciede">keyword2ciede</a></li><li><a href="global.html#keyword2contrast">keyword2contrast</a></li><li><a href="global.html#keyword2hex">keyword2hex</a></li><li><a href="global.html#keyword2hsl">keyword2hsl</a></li><li><a href="global.html#keyword2hsv">keyword2hsv</a></li><li><a href="global.html#keyword2hwb">keyword2hwb</a></li><li><a href="global.html#keyword2lab">keyword2lab</a></li><li><a href="global.html#keyword2lch">keyword2lch</a></li><li><a href="global.html#keyword2rgb">keyword2rgb</a></li><li><a href="global.html#lab2ciede">lab2ciede</a></li><li><a href="global.html#lab2contrast">lab2contrast</a></li><li><a href="global.html#lab2hsl">lab2hsl</a></li><li><a href="global.html#lab2hsv">lab2hsv</a></li><li><a href="global.html#lab2hwb">lab2hwb</a></li><li><a href="global.html#lab2lch">lab2lch</a></li><li><a href="global.html#lab2rgb">lab2rgb</a></li><li><a href="global.html#lab2xyz">lab2xyz</a></li><li><a href="global.html#lch2ciede">lch2ciede</a></li><li><a href="global.html#lch2contrast">lch2contrast</a></li><li><a href="global.html#lch2hex">lch2hex</a></li><li><a href="global.html#lch2hsl">lch2hsl</a></li><li><a href="global.html#lch2hsv">lch2hsv</a></li><li><a href="global.html#lch2hwb">lch2hwb</a></li><li><a href="global.html#lch2lab">lch2lab</a></li><li><a href="global.html#lch2rgb">lch2rgb</a></li><li><a href="global.html#lch2xyz">lch2xyz</a></li><li><a href="global.html#rgb2ciede">rgb2ciede</a></li><li><a href="global.html#rgb2contrast">rgb2contrast</a></li><li><a href="global.html#rgb2hex">rgb2hex</a></li><li><a href="global.html#rgb2hsl">rgb2hsl</a></li><li><a href="global.html#rgb2hsv">rgb2hsv</a></li><li><a href="global.html#rgb2hwb">rgb2hwb</a></li><li><a href="global.html#rgb2lab">rgb2lab</a></li><li><a href="global.html#rgb2lch">rgb2lch</a></li><li><a href="global.html#rgb2xyz">rgb2xyz</a></li><li><a href="global.html#xyz2ciede">xyz2ciede</a></li><li><a href="global.html#xyz2contrast">xyz2contrast</a></li><li><a href="global.html#xyz2hex">xyz2hex</a></li><li><a href="global.html#xyz2hsl">xyz2hsl</a></li><li><a href="global.html#xyz2hsv">xyz2hsv</a></li><li><a href="global.html#xyz2hwb">xyz2hwb</a></li><li><a href="global.html#xyz2lab">xyz2lab</a></li><li><a href="global.html#xyz2lch">xyz2lch</a></li><li><a href="global.html#xyz2rgb">xyz2rgb</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lab-ciede.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { abs, atan2d, cosd, exp, pow, sind, sqrt, precision } from './util';

/* Return
/* ========================================================================== */

/**
* @func lab2ciede
* @desc Return the CIEDE2000 difference between 2 CIE LAB colors (International Commission on Illumination, Delta E).
* @param {Array} lab1 - CIE LAB color
* @param {Number} lab1.0 - Lightness
* @param {Number} lab1.1 - Red/Green Coordinate
* @param {Number} lab1.2 - Yellow/Blue Coordinate
* @param {Array} lab2 - CIE LAB color
* @param {Number} lab2.0 - Lightness
* @param {Number} lab2.1 - Red/Green Coordinate
* @param {Number} lab2.2 - Yellow/Blue Coordinate
* @return {NumberCIEDE}
* @example
* lab2ciede([97.14, -21.56, 94.48], [0, 0, 0]) // => 100
* @link https://en.wikipedia.org/wiki/Color_difference#CIEDE2000
*/

export default function lab2ciede([L1, a1, b1], [L2, a2, b2]) {
	const c1 = sqrt(pow(a1, 2) + pow(b1, 2));
	const c2 = sqrt(pow(a2, 2) + pow(b2, 2));

	const deltaLPrime = L2 - L1;

	const lBar = (L1 + L2) / 2;
	const cBar = (c1 + c2) / 2;

	const cBarPow7 = pow(cBar, 7);
	const cCoeff = sqrt(cBarPow7 / (cBarPow7 + pow(25, 7)));
	const a1Prime = a1 + a1 / 2 * (1 - cCoeff);
	const a2Prime = a2 + a2 / 2 * (1 - cCoeff);

	const c1Prime = sqrt(a1Prime * a1Prime + b1 * b1);
	const c2Prime = sqrt(a2Prime * a2Prime + b2 * b2);
	const cBarPrime = (c1Prime + c2Prime) / 2;
	const deltaCPrime = c2Prime - c1Prime;

	const h1Prime = a1Prime === 0 &amp;&amp; b1 === 0 ? 0 : atan2d(b1, a1Prime) % 360;
	const h2Prime = a2Prime === 0 &amp;&amp; b2 === 0 ? 0 : atan2d(b2, a2Prime) % 360;

	let deltaSmallHPrime;
	let deltaBigHPrime;
	let hBarPrime;

	if (c1Prime === 0 || c2Prime === 0) {
		deltaSmallHPrime = 0;
		deltaBigHPrime = 0;
		hBarPrime = h1Prime + h2Prime;
	} else {
		deltaSmallHPrime = abs(h1Prime - h2Prime) &lt;= 180
			? h2Prime - h1Prime
		: h2Prime &lt;= h1Prime
			? h2Prime - h1Prime + 360
		: h2Prime - h1Prime - 360;

		deltaBigHPrime = 2 * sqrt(c1Prime * c2Prime) * sind(deltaSmallHPrime / 2);

		hBarPrime = abs(h1Prime - h2Prime) &lt;= 180
			? (h1Prime + h2Prime) / 2
		: h1Prime + h2Prime &lt; 360
			? (h1Prime + h2Prime + 360) / 2
		: (h1Prime + h2Prime - 360) / 2;
	}

	const T = 1 - 0.17 * precision * cosd(hBarPrime - 30) + 0.24 * precision * cosd(2 * hBarPrime) + 0.32 * precision * cosd(3 * hBarPrime + 6) - 0.2 * precision * cosd(4 * hBarPrime - 63) / precision / precision;

	const slCoeff = (lBar - 50) * (lBar - 50);
	const sl = 1 + 0.015 * precision * slCoeff / sqrt(20 + slCoeff) / precision;
	const sc = 1 + 0.045 * precision * cBarPrime / precision;
	const sh = 1 + 0.015 * precision * cBarPrime * T / precision;

	const RtCoeff = 60 * exp(-((hBarPrime - 275) / 25) * ((hBarPrime - 275) / 25));
	const Rt = -2 * cCoeff * sind(RtCoeff);

	const term1 = deltaLPrime / (kl * sl);
	const term2 = deltaCPrime / (kc * sc);
	const term3 = deltaBigHPrime / (kh * sh);
	const term4 = Rt * term2 * term3;

	return sqrt(term1 * term1 + term2 * term2 + term3 * term3 + term4);
}

// weight factors
const kl = 1;
const kc = 1;
const kh = 1;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/jquery-3.1.1.min.js"></script>

<script src="scripts/search.js"></script>


<script src="scripts/collapse.js"></script>



    <script src="scripts/custom.js"></script>
    
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
    
</body>
</html>
